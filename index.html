<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Trionic 7 Gear Calibration Calculator</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="app.js"></script>
</head>

<body>
  <h2>Trionic 7 Manual Gearbox Calibration Calculator</h2>
  <label for="templateSelect">Select Template:</label>
  <select id="templateSelect" onchange="loadTemplate()">
    <option value="">-- Choose a template --</option>
    <option value="fm55">FM55</option>
    <option value="fm57">FM57</option>
    <option value="roffe">Roffe's Quaife</option>
  </select>

  <label>Final Drive Ratio: <input type="number" step="0.01" id="finalDrive" value="3.61"></label>
  <label>Representative RPM: <input type="number" id="rpm" value="3000"></label>
  <label>Tire Diameter (m): <input type="number" step="0.001" id="tireDiameter" value="0.626"></label>

  <h3>Gear Ratio & Tolerance %</h3>
  <div id="gearInputs">
    <div class="gear-group">
      <span class="gear-label">1st</span>
      <input type="number" step="0.01" class="gearRatio" value="3.00">
      <input type="number" step="0.1" class="tolerance" value="25.9" placeholder="Tolerance %">
    </div>
    <div class="gear-group">
      <span class="gear-label">2nd</span>
      <input type="number" step="0.01" class="gearRatio" value="1.933">
      <input type="number" step="0.1" class="tolerance" value="20">
    </div>
    <div class="gear-group">
      <span class="gear-label">3rd</span>
      <input type="number" step="0.01" class="gearRatio" value="1.368">
      <input type="number" step="0.1" class="tolerance" value="14.9">
    </div>
    <div class="gear-group">
      <span class="gear-label">4th</span>
      <input type="number" step="0.01" class="gearRatio" value="1.045">
      <input type="number" step="0.1" class="tolerance" value="11.5">
    </div>
    <div class="gear-group">
      <span class="gear-label">5th</span>
      <input type="number" step="0.01" class="gearRatio" value="0.833">
      <input type="number" step="0.1" class="tolerance" value="11">
    </div>
    <div class="gear-group">
      <span class="gear-label">6th</span>
      <input type="number" step="0.01" class="gearRatio" value="0.704">
      <input type="number" step="0.1" class="tolerance" value="10.5">
    </div>
  </div>

  <button onclick="calculateRatios()">Calculate</button>

  <table id="outputTable" style="display:none">
    <thead>
      <tr>
        <th>Gear</th>
        <th>GearCal.Ratio</th>
        <th>GearCal.Range (Â±Tolerance)</th>
        <th>Speed at Representative RPM (km/h)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!--<h3>Speed vs RPM Plot</h3>-->
  <canvas id="gearChart" width="700" height="400"></canvas>
</body>

</html>